# clow99/NexusDocs — User Guide

Generated by NexusDocs from a scan of the repository at ref `main`.

## User Guide

NexusDocs is a Next.js application for managing repository documentation with AI-assisted updates based on GitHub code changes.

### Getting started

1. **Install prerequisites**
   - Node.js 18+ and npm
   - A running MariaDB or MySQL-compatible database

2. **Clone and install**
   - Clone this repository
   - Install dependencies:  
     ```bash
     npm install
     ```

3. **Configure environment variables**
   - Copy `.env.example` to `.env`
   - Set at least:
     - `NEXT_PUBLIC_APP_URL` — e.g. `http://localhost:3000`
     - `DATABASE_URL` — e.g. `mariadb://username:password@localhost:3306/nexusdocs`
     - `AUTH_SECRET` — a strong random string
   - See `.env.example` and `DATABASE_SETUP.md` for details.

4. **Set up the database**
   - Push the Prisma schema to your database:
     ```bash
     npx prisma db push
     ```

5. **Start the development server**
   - Run:
     ```bash
     npm run dev
     ```
   - Open `http://localhost:3000` in your browser.

### Basic workflow

1. **Sign in**
   - Access the app at `NEXT_PUBLIC_APP_URL`.
   - Sign in using the configured auth provider.

2. **Connect GitHub (if enabled)**
   - Use the “Connect GitHub” flow (internally backed by `/api/auth/github/connect`).
   - Authorize NexusDocs to access your repositories.

3. **Create a project**
   - Create a new project pointing to a GitHub repository you want to document.
   - Configure project settings (repository details, documentation paths, etc.).

4. **Scan the repository**
   - Trigger a scan for your project (internally uses `/api/projects/:projectId/scan`).
   - View scan history and details via the project’s scans page.

5. **Generate documentation proposals**
   - Request AI-generated documentation updates for a project (via `/api/projects/:projectId/ai/generate`).
   - Review generated proposals and associated file changes.

6. **Review and manage proposals**
   - List proposals for a project (`/api/projects/:projectId/proposals`).
   - For each proposal:
     - Inspect the summary and diff.
     - Approve, reject, or regenerate as needed:
       - Approve: `/api/projects/:projectId/proposals/:proposalId/approve`
       - Reject: `/api/projects/:projectId/proposals/:proposalId/reject`
       - Regenerate: `/api/projects/:projectId/proposals/:proposalId/regenerate`
     - Publish approved proposals when ready:
       - `/api/projects/:projectId/proposals/:proposalId/publish`

7. **Monitor drift**
   - Use the drift view (backed by `/api/projects/:projectId/drift`) to see where documentation has diverged from the codebase.

### AI configuration

- The AI status endpoint `/api/ai/status` reports whether AI is properly configured.
- Ensure your OpenAI configuration is set in environment variables as described in `.env.example`.
- The AI generator is used by `/api/projects/:projectId/ai/generate` to create documentation proposals.

### Account and profile

- Retrieve your current user info via `/api/auth/me`.
- Update profile settings via `/api/auth/profile` (PATCH).
- Manage GitHub connection:
  - Connect: `/api/auth/github/connect`
  - Disconnect: `/api/auth/github/disconnect`
  - Manage personal access token: `/api/auth/github/pat`

### Useful commands

- `npm run dev` — `next dev`
- `npm run build` — `next build`
- `npm run start` — `next start`
- `npm run lint` — `eslint .`

### Troubleshooting

- **Database issues**
  - Verify `DATABASE_URL` points to a reachable MariaDB/MySQL instance.
  - Confirm `npx prisma db push` has been run successfully.

- **Authentication issues**
  - Ensure `AUTH_SECRET` is set and stable.
  - Confirm OAuth credentials (e.g., Google, GitHub) match your `NEXT_PUBLIC_APP_URL`.

- **AI not available**
  - Check `/api/ai/status` for configuration errors.
  - Ensure AI-related environment variables are set and not exposed on the client.

For more detailed setup notes, see `DATABASE_SETUP.md` and the main `README.md` in the repository.